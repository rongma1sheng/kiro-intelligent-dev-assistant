{
  "id": "6763ddaf-f798-4b1d-90dd-36246791c2e9",
  "type": "code_pattern",
  "content": {
    "code": "# ç³»ç»Ÿä¼˜åŒ–é—®é¢˜è¯Šæ–­å’Œä¿®å¤æ¨¡å¼\nclass SystemOptimizer:\n    \"\"\"ç³»ç»Ÿä¼˜åŒ–å™¨\"\"\"\n    \n    def __init__(self, memory_system, skills_system):\n        self.memory_system = memory_system\n        self.skills_system = skills_system\n        self.optimization_results = []\n    \n    def optimize_chinese_search(self):\n        \"\"\"ä¼˜åŒ–ä¸­æ–‡æœç´¢åŠŸèƒ½\"\"\"\n        print(\"ğŸ” ä¼˜åŒ–ä¸­æ–‡æœç´¢åŠŸèƒ½...\")\n        \n        # 1. æ£€æŸ¥å½“å‰æœç´¢é…ç½®\n        current_config = self.memory_system.get_search_config()\n        \n        # 2. æ·»åŠ ä¸­æ–‡åˆ†è¯æ”¯æŒ\n        try:\n            import jieba\n            jieba.initialize()\n            \n            # 3. é‡å»ºæœç´¢ç´¢å¼•\n            self.memory_system.rebuild_search_index(\n                enable_chinese=True,\n                tokenizer='jieba'\n            )\n            \n            self.optimization_results.append({\n                'component': 'chinese_search',\n                'status': 'optimized',\n                'changes': ['æ·»åŠ jiebaåˆ†è¯', 'é‡å»ºæœç´¢ç´¢å¼•', 'å¯ç”¨ä¸­æ–‡æ”¯æŒ']\n            })\n            \n        except ImportError:\n            self.optimization_results.append({\n                'component': 'chinese_search',\n                'status': 'failed',\n                'error': 'jiebaåº“æœªå®‰è£…'\n            })\n    \n    def fix_data_synchronization(self):\n        \"\"\"ä¿®å¤æ•°æ®åŒæ­¥é—®é¢˜\"\"\"\n        print(\"ğŸ”„ ä¿®å¤æ•°æ®åŒæ­¥é—®é¢˜...\")\n        \n        # 1. éªŒè¯æ•°æ®ä¸€è‡´æ€§\n        memory_events = self.memory_system.get_learning_events_count()\n        skills_events = self.skills_system.get_learning_events_count()\n        \n        if memory_events != skills_events:\n            # 2. åŒæ­¥æ•°æ®\n            self.skills_system.sync_learning_events_from_memory(\n                self.memory_system\n            )\n            \n            # 3. é‡æ–°è®¡ç®—ç»Ÿè®¡æ•°æ®\n            self.skills_system.recalculate_statistics()\n            \n            self.optimization_results.append({\n                'component': 'data_sync',\n                'status': 'fixed',\n                'changes': [f'åŒæ­¥äº†{abs(memory_events - skills_events)}ä¸ªå­¦ä¹ äº‹ä»¶']\n            })\n    \n    def enhance_hook_matching(self):\n        \"\"\"å¢å¼ºHookåŒ¹é…æ•ˆæœ\"\"\"\n        print(\"ğŸ¯ å¢å¼ºHookåŒ¹é…æ•ˆæœ...\")\n        \n        # 1. ä¼˜åŒ–æœç´¢ç­–ç•¥\n        enhanced_config = {\n            'similarity_threshold': 0.3,  # é™ä½é˜ˆå€¼æé«˜å¬å›ç‡\n            'enable_semantic_search': True,\n            'max_results': 10,\n            'enable_fuzzy_matching': True\n        }\n        \n        # 2. æ›´æ–°Hookæœç´¢é…ç½®\n        self.memory_system.update_search_config(enhanced_config)\n        \n        # 3. æ·»åŠ åŒä¹‰è¯æ˜ å°„\n        synonyms = {\n            'error': ['é”™è¯¯', 'bug', 'é—®é¢˜', 'å¼‚å¸¸'],\n            'optimization': ['ä¼˜åŒ–', 'æ”¹è¿›', 'æå‡', 'å¢å¼º'],\n            'testing': ['æµ‹è¯•', 'éªŒè¯', 'æ£€æŸ¥', 'æ ¡éªŒ']\n        }\n        \n        self.memory_system.add_synonym_mappings(synonyms)\n        \n        self.optimization_results.append({\n            'component': 'hook_enhancement',\n            'status': 'enhanced',\n            'changes': ['é™ä½åŒ¹é…é˜ˆå€¼', 'å¯ç”¨è¯­ä¹‰æœç´¢', 'æ·»åŠ åŒä¹‰è¯æ˜ å°„']\n        })\n    \n    def generate_optimization_report(self):\n        \"\"\"ç”Ÿæˆä¼˜åŒ–æŠ¥å‘Š\"\"\"\n        return {\n            'timestamp': datetime.now().isoformat(),\n            'optimizations': self.optimization_results,\n            'success_count': len([r for r in self.optimization_results if r['status'] in ['optimized', 'fixed', 'enhanced']]),\n            'total_count': len(self.optimization_results)\n        }",
    "description": "ç³»ç»Ÿä¼˜åŒ–é—®é¢˜çš„è¯Šæ–­å’Œä¿®å¤å®ç°ï¼ŒåŒ…å«ä¸­æ–‡æœç´¢ã€æ•°æ®åŒæ­¥ã€Hookå¢å¼ºçš„å®Œæ•´è§£å†³æ–¹æ¡ˆ",
    "file_type": "python"
  },
  "hash_key": "accae71359a2880a",
  "metadata": {
    "file_type": "python"
  },
  "created_at": "2026-02-03T12:00:31.881404",
  "last_used": "2026-02-03T12:00:31.881404",
  "usage_count": 0,
  "success_rate": 0.0,
  "priority": 2,
  "tags": [
    "system_optimization",
    "chinese_search",
    "data_sync",
    "hook_enhancement",
    "python",
    "code"
  ],
  "source": "user",
  "confidence": 1.0
}
{
  "id": "055485dd-fb86-4668-b377-748e7211ddac",
  "type": "code_pattern",
  "content": {
    "code": "# ç³»ç»Ÿå¥åº·æ£€æŸ¥æ‰§è¡Œæ¨¡å¼\nimport subprocess\nimport json\nfrom datetime import datetime\nfrom pathlib import Path\n\nclass SystemHealthChecker:\n    \"\"\"ç³»ç»Ÿå¥åº·æ£€æŸ¥å™¨\"\"\"\n    \n    def __init__(self):\n        self.check_results = {\n            'timestamp': datetime.now().isoformat(),\n            'systems': {},\n            'overall_status': 'unknown'\n        }\n    \n    def run_full_health_check(self):\n        \"\"\"æ‰§è¡Œå…¨é‡å¥åº·æ£€æŸ¥\"\"\"\n        print(\"ğŸ¥ å¼€å§‹ç³»ç»Ÿå…¨é‡å¥åº·æ£€æŸ¥\")\n        \n        # 1. æ ¸å¿ƒç³»ç»ŸçŠ¶æ€æ£€æŸ¥\n        self.check_core_systems()\n        \n        # 2. åŠŸèƒ½æµ‹è¯•éªŒè¯\n        self.run_functional_tests()\n        \n        # 3. é›†æˆçŠ¶æ€æ£€æŸ¥\n        self.check_integration_status()\n        \n        # 4. æ€§èƒ½åŸºå‡†æµ‹è¯•\n        self.run_performance_tests()\n        \n        # 5. é…ç½®ä¸€è‡´æ€§æ£€æŸ¥\n        self.check_configuration_consistency()\n        \n        # 6. ç”Ÿæˆå¥åº·æŠ¥å‘Š\n        return self.generate_health_report()\n    \n    def check_core_systems(self):\n        \"\"\"æ£€æŸ¥æ ¸å¿ƒç³»ç»ŸçŠ¶æ€\"\"\"\n        systems = [\n            ('memory_system', 'python scripts/manage_memory_system.py stats'),\n            ('skills_system', 'python scripts/manage_team_skills.py overview'),\n        ]\n        \n        for system_name, command in systems:\n            try:\n                result = subprocess.run(\n                    command, shell=True, capture_output=True, \n                    text=True, timeout=60\n                )\n                self.check_results['systems'][system_name] = {\n                    'status': 'healthy' if result.returncode == 0 else 'error',\n                    'exit_code': result.returncode,\n                    'output_lines': len(result.stdout.splitlines())\n                }\n            except Exception as e:\n                self.check_results['systems'][system_name] = {\n                    'status': 'error',\n                    'error': str(e)\n                }\n    \n    def run_functional_tests(self):\n        \"\"\"è¿è¡ŒåŠŸèƒ½æµ‹è¯•\"\"\"\n        test_commands = [\n            'python scripts/test_memory_system.py',\n            'python scripts/test_skills_meta_learning.py',\n            'python scripts/test_memory_integration.py'\n        ]\n        \n        test_results = []\n        for cmd in test_commands:\n            try:\n                result = subprocess.run(\n                    cmd, shell=True, capture_output=True, \n                    text=True, timeout=120\n                )\n                test_results.append({\n                    'command': cmd,\n                    'success': result.returncode == 0,\n                    'output': result.stdout\n                })\n            except Exception as e:\n                test_results.append({\n                    'command': cmd,\n                    'success': False,\n                    'error': str(e)\n                })\n        \n        self.check_results['functional_tests'] = test_results\n    \n    def generate_health_report(self):\n        \"\"\"ç”Ÿæˆå¥åº·æ£€æŸ¥æŠ¥å‘Š\"\"\"\n        # è®¡ç®—æ•´ä½“å¥åº·çŠ¶æ€\n        all_systems_healthy = all(\n            s.get('status') == 'healthy' \n            for s in self.check_results['systems'].values()\n        )\n        \n        all_tests_passed = all(\n            t.get('success', False) \n            for t in self.check_results.get('functional_tests', [])\n        )\n        \n        self.check_results['overall_status'] = (\n            'excellent' if all_systems_healthy and all_tests_passed \n            else 'degraded'\n        )\n        \n        return self.check_results",
    "description": "ç³»ç»Ÿå¥åº·æ£€æŸ¥çš„å®Œæ•´å®ç°ï¼ŒåŒ…å«å¤šç»´åº¦æ£€æŸ¥ã€æµ‹è¯•æ‰§è¡Œå’ŒæŠ¥å‘Šç”Ÿæˆ",
    "file_type": "python"
  },
  "hash_key": "b078a48e3b6f6323",
  "metadata": {
    "file_type": "python"
  },
  "created_at": "2026-02-03T12:00:31.859746",
  "last_used": "2026-02-03T12:00:31.859746",
  "usage_count": 0,
  "success_rate": 0.0,
  "priority": 2,
  "tags": [
    "health_check",
    "system_monitoring",
    "automation",
    "testing",
    "python",
    "code"
  ],
  "source": "user",
  "confidence": 1.0
}
{
  "name": "上下文一致性锚定系统",
  "version": "2.0.0",
  "description": "定期刷新关键上下文信息，防止LLM遗忘重要约束，与任务生命周期管理协同工作",
  "when": {
    "type": "userTriggered"
  },
  "then": {
    "type": "askAgent",
    "prompt": "⚓ 上下文一致性锚定检查：\n\n🧠 关键信息锚点验证：\n1. 系统约束：零号铁律、核心铁律、测试铁律\n2. 当前目标：{从上下文提取当前主要任务}\n3. 质量标准：测试覆盖率100%，代码复杂度<10\n4. 角色权限：当前角色及其允许/禁止操作\n\n🔄 状态一致性检查：\n- 当前角色：{验证角色是否一致}\n- 任务进度：{检查任务状态是否同步}\n- 文件修改：{验证修改记录完整性}\n- 上下文哈希：{计算并验证上下文完整性}\n\n📊 上下文压缩策略：\n- 语义优先级：保留最重要的约束和目标\n- 关键信息置顶：将核心约束放在上下文开头\n- 定期刷新：每5分钟重新锚定关键信息\n\n🍎 Mac环境自动适配:\n- 使用python3命令\n- 使用zsh作为默认shell\n- 支持Apple Silicon和Intel芯片\n\n如发现上下文不一致，请立即暂停并要求澄清。"
  }
}